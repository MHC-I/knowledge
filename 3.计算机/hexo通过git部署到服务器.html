
<!doctype html>
<html lang="zh">



<head>
    <meta charset="UTF-8">
    <meta name="viewport"
        content="width=device-width, user-scalable=no, initial-scale=1.0, maximum-scale=1.0, minimum-scale=1.0">
    <meta http-equiv="X-UA-Compatible" content="ie=edge">
    <title>hexoé€šè¿‡gitéƒ¨ç½²åˆ°æœåŠ¡å™¨</title>
    
    <link rel="stylesheet" href="https://cdn.jsdelivr.net/npm/vditor/dist/index.css" />
    

    

    
    <script src="./../assets/front-end-lib/all_components.js"></script>
    
        
        
        


    

    <link rel="stylesheet" href="./../assets/js_css/theme.css">
    <link rel="stylesheet" href="./../assets/js_css/github-markdown-css.css">
</head>



<main id="static_app_llej" class="markdown-body">
    <main title="hexoé€šè¿‡gitéƒ¨ç½²åˆ°æœåŠ¡å™¨" data-type="NodeDocument" data-n-id="20210925210248-8kfo7h1" type="doc" updated="20210925210248" data-n-id="20210925210248-8kfo7h1"><h1 title="hexoé€šè¿‡gitéƒ¨ç½²åˆ°æœåŠ¡å™¨" data-type="NodeDocument" data-n-id="20210925210248-8kfo7h1" type="doc" updated="20210925210248" data-n-id="20210925210248-8kfo7h1">hexoé€šè¿‡gitéƒ¨ç½²åˆ°æœåŠ¡å™¨</h1>
<hr />
<p data-type="NodeParagraph" data-n-id="20210925210248-n73sg6f">title: Hexoé€šè¿‡Gitéƒ¨ç½²åˆ°æœåŠ¡å™¨<br />
date: 2021-02-19 16:58:52<br />
categories: è®¡ç®—æœº<br />
tags:</p>
<ul data-type="NodeList" data-n-id="20210925210248-vya803u">
<li data-type="NodeListItem" data-n-id="20210925210248-9cvmehc"><span class="ListItemDot"></span>
<p data-type="NodeParagraph" data-n-id="20210925210248-m6edhau">Hexo</p>
</li>
<li data-type="NodeListItem" data-n-id="20210925210248-gzhd13k"><span class="ListItemDot"></span>
<p data-type="NodeParagraph" data-n-id="20210925210248-rg0et0t">Linux</p>
</li>
</ul>
<hr />
<h2 id="ç›®çš„-" data-type="NodeHeading" data-n-id="20210925210248-dn08yzw">ç›®çš„ï¼š<a id="vditorAnchor-ç›®çš„-" class="vditor-anchor" href="#ç›®çš„-"><img src="./../assets/icon/alink.png" /></a></h2>
<ul data-type="NodeList" data-n-id="20210925210248-qstf6le">
<li data-type="NodeListItem" data-n-id="20210925210248-z0wpyfs"><span class="ListItemDot"></span>
<p data-type="NodeParagraph" data-n-id="20210925210248-k0a29js">é€šè¿‡hexoç”Ÿæˆç½‘é¡µ</p>
</li>
<li data-type="NodeListItem" data-n-id="20210925210248-jdw1d1v"><span class="ListItemDot"></span>
<p data-type="NodeParagraph" data-n-id="20210925210248-am5oo0h">åœ¨æœåŠ¡å™¨ä¸Šæ­å»ºgitä»“åº“ï¼Œå¹¶å°†é™æ€æ–‡ä»¶é€šè¿‡gitä¸Šä¼ åˆ°äº‘ä¸»æœº</p>
</li>
<li data-type="NodeListItem" data-n-id="20210925210248-ygy9vp0"><span class="ListItemDot"></span>
<p data-type="NodeParagraph" data-n-id="20210925210248-t4osxz0">ä½¿ç”¨git-hookså®ç°è‡ªåŠ¨éƒ¨ç½²</p>
</li>
</ul>
<h2 id="åˆ›å»ºgitä»“åº“" data-type="NodeHeading" data-n-id="20210925210248-5vf9rk4">åˆ›å»ºgitä»“åº“<a id="vditorAnchor-åˆ›å»ºgitä»“åº“" class="vditor-anchor" href="#åˆ›å»ºgitä»“åº“"><img src="./../assets/icon/alink.png" /></a></h2>
<h3 id="1-å®‰è£…git" data-type="NodeHeading" data-n-id="20210925210248-8e9xc7z">1.å®‰è£…git<a id="vditorAnchor-1-å®‰è£…git" class="vditor-anchor" href="#1-å®‰è£…git"><img src="./../assets/icon/alink.png" /></a></h3>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-pjis2mw" class="code-block" data-language=""><code>yum install git #centos
apt install git #ubuntu
</code></pre>
<h3 id="2-æ·»åŠ ä¸€ä¸ªgitç”¨æˆ·" data-type="NodeHeading" data-n-id="20210925210248-7pk7mth">2.æ·»åŠ ä¸€ä¸ªgitç”¨æˆ·<a id="vditorAnchor-2-æ·»åŠ ä¸€ä¸ªgitç”¨æˆ·" class="vditor-anchor" href="#2-æ·»åŠ ä¸€ä¸ªgitç”¨æˆ·"><img src="./../assets/icon/alink.png" /></a></h3>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-hi7joiv" class="code-block" data-language=""><code>adduser git   #æ·»åŠ gitç”¨æˆ·
$ chmod 740 /etc/sudoers   #æ”¹å˜sudoersæ–‡ä»¶çš„æƒé™ä¸ºæ–‡ä»¶æ‰€æœ‰è€…å¯å†™
$ vim /etc/sudoers   #vimç¼–è¾‘sudoers
</code></pre>
<p data-type="NodeParagraph" data-n-id="20210925210248-7xotzw1">æ‰¾åˆ°<code data-type="NodeCodeSpan">root ALL=(ALL) ALL</code>ï¼Œåœ¨å®ƒä¸‹æ–¹åŠ å…¥ä¸€è¡Œ</p>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-7wa2jmg" class="code-block" data-language="text"><code>git ALL=(ALL) ALL
</code></pre>
<p data-type="NodeParagraph" data-n-id="20210925210248-a9z154m"><span class="img"><img src="../assets/1.ä¿®æ”¹sudoers-20210925210248-3i792pm.png" alt="1.ä¿®æ”¹sudoers" data-type="NodeImage" /></span></p>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-vvy7643" class="code-block" data-language=""><code>chmod 400 /etc/sudoers   #å°†å…¶æƒé™ä¿®æ”¹ä¸ºæ–‡ä»¶æ‰€æœ‰è€…å¯è¯»
$ sudo passwd git  #è®¾ç½®gitç”¨æˆ·çš„å¯†ç 
</code></pre>
<h3 id="3-åˆ›å»ºgitä»“åº“å¹¶ä½¿ç”¨git-hookså®ç°è‡ªåŠ¨éƒ¨ç½²" data-type="NodeHeading" data-n-id="20210925210248-r2dw534">3.åˆ›å»ºgitä»“åº“å¹¶ä½¿ç”¨git-hookså®ç°è‡ªåŠ¨éƒ¨ç½²<a id="vditorAnchor-3-åˆ›å»ºgitä»“åº“å¹¶ä½¿ç”¨git-hookså®ç°è‡ªåŠ¨éƒ¨ç½²" class="vditor-anchor" href="#3-åˆ›å»ºgitä»“åº“å¹¶ä½¿ç”¨git-hookså®ç°è‡ªåŠ¨éƒ¨ç½²"><img src="./../assets/icon/alink.png" /></a></h3>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-7i6n7dd" class="code-block" data-language=""><code>$ sudo mkdir /var/repo    #æ–°å»ºç›®å½•ï¼Œè¿™æ˜¯gitä»“åº“çš„ä½ç½®
$ sudo mkdir /www/wwwroot/blog    #è¿™æ˜¯åšå®¢æºæ–‡ä»¶çš„ç›®å½•
$ cd /var/repo  #è½¬åˆ°gitä»“åº“çš„æ–‡ä»¶å¤¹
$ sudo git init --bare blog.git #åˆ›å»ºä¸€ä¸ªåå«blogçš„ä»“åº“
$ sudo vim /var/repo/blog.git/hooks/post-update
</code></pre>
<p data-type="NodeParagraph" data-n-id="20210925210248-nk30h9o">å¢åŠ ä¸‹é¢ä¸¤è¡Œï¼Œå½“æˆ‘ä»¬ä»æœ¬åœ°pushä¸Šå»æ—¶ï¼Œgit-hooksä¼šè‡ªåŠ¨æ‰§è¡Œä¸‹åˆ—å‘½ä»¤ï¼Œè¿™æ˜¯gitè‡ªå¸¦çš„çš„æ–¹æ³•ï¼Œè¡¨ç¤ºåœ¨<code data-type="NodeCodeSpan">/var/repo/blog.git</code>ä¸­å¯¹<code data-type="NodeCodeSpan">/www/wwwroot/blog</code>æ‰§è¡Œ<code data-type="NodeCodeSpan">checkout -f</code>å‘½ä»¤ï¼Œå¯ä»¥åœ¨æˆ‘ä»¬æ¯æ¬¡ push å®Œä¹‹åï¼ŒæŠŠéƒ¨ç½²ç›®å½•æ›´æ–°åˆ°åšå®¢çš„æœ€æ–°çŠ¶æ€</p>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-4hn28i8" class="code-block" data-language=""><code>#!/bin/bash
git --work-tree=/www/wwwroot/blog --git-dir=/var/repo/blog.git checkout -f
</code></pre>
<h3 id="4-ä¿®æ”¹æƒé™" data-type="NodeHeading" data-n-id="20210925210248-6fp3121">4.ä¿®æ”¹æƒé™<a id="vditorAnchor-4-ä¿®æ”¹æƒé™" class="vditor-anchor" href="#4-ä¿®æ”¹æƒé™"><img src="./../assets/icon/alink.png" /></a></h3>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-r8l5cjr" class="code-block" data-language=""><code>$ cd blog.git/hooks/
$ sudo chown -R git:git /var/repo/      #è¿›è¡Œæ–‡ä»¶å¤¹åŠå…¶å­æ–‡ä»¶æ‰€æœ‰è€…å˜æ›´ä¸ºgit
$ sudo chown -R git:git /www/wwwroot/blog  #è¿›è¡Œæ–‡ä»¶å¤¹åŠå…¶å­æ–‡ä»¶æ‰€æœ‰è€…å˜æ›´ä¸ºgit
$ sudo chmod +x post-update  #èµ‹äºˆpost-updateå¯æ‰§è¡Œæƒé™
</code></pre>
<h2 id="åˆ›å»ºé™æ€é¡µé¢" data-type="NodeHeading" data-n-id="20210925210248-qfl945a">åˆ›å»ºé™æ€é¡µé¢<a id="vditorAnchor-åˆ›å»ºé™æ€é¡µé¢" class="vditor-anchor" href="#åˆ›å»ºé™æ€é¡µé¢"><img src="./../assets/icon/alink.png" /></a></h2>
<p data-type="NodeParagraph" data-n-id="20210925210248-541tbds">ä¸¤ç§æ–¹æ³•å¯é€‰</p>
<p data-type="NodeParagraph" data-n-id="20210925210248-8s14t2t">1.ä½¿ç”¨å®å¡”é¢æ¿åˆ›å»ºä¸€ä¸ªé™æ€ç«™ç‚¹ï¼Œå°†ç½‘ç«™æ ¹ç›®å½•ä¿®æ”¹ä¸º<code data-type="NodeCodeSpan">/www/wwwroot/blog</code>å³å¯</p>
<p data-type="NodeParagraph" data-n-id="20210925210248-ti4tvh4"><span class="img"><img src="../assets/2.ä¿®æ”¹ç«™ç‚¹ç›®å½•-20210925210248-qqakpyc.png" alt="2.ä¿®æ”¹ç«™ç‚¹ç›®å½•" data-type="NodeImage" /></span></p>
<p data-type="NodeParagraph" data-n-id="20210925210248-3i0xpvn">2.ç›´æ¥ä¿®æ”¹nginxé…ç½®æ–‡ä»¶ï¼Œå‚è€ƒåŸæ–‡ç« (æœªè¿›è¡Œæµ‹è¯•)</p>
<h2 id="ä¿®æ”¹hexoé…ç½®æ–‡ä»¶" data-type="NodeHeading" data-n-id="20210925210248-yzqaac3">ä¿®æ”¹hexoé…ç½®æ–‡ä»¶<a id="vditorAnchor-ä¿®æ”¹hexoé…ç½®æ–‡ä»¶" class="vditor-anchor" href="#ä¿®æ”¹hexoé…ç½®æ–‡ä»¶"><img src="./../assets/icon/alink.png" /></a></h2>
<p data-type="NodeParagraph" data-n-id="20210925210248-3hnvygh">æ‰¾åˆ°æ–‡ä»¶<code data-type="NodeCodeSpan">/hexo/_config.yml</code></p>
<p data-type="NodeParagraph" data-n-id="20210925210248-9tpny28">åœ¨æœ€åé¢æ‰¾åˆ°<code data-type="NodeCodeSpan">deploy:</code>ä¿®æ”¹ä¸º</p>
<pre data-type="NodeCodeBlock" data-n-id="20210925210248-364x632" class="code-block" data-language=""><code>deploy:
  type: git
  repo: git@192.168.0.3:/var/repo/blog.git
  branch: master
</code></pre>
<p data-type="NodeParagraph" data-n-id="20210925210248-38t5cbk">å°†<code data-type="NodeCodeSpan">192.168.0.3</code>ä¿®æ”¹ä¸ºä½ çš„æœåŠ¡å™¨åœ°å€</p>
<p data-type="NodeParagraph" data-n-id="20210925210248-76whj31">æ³¨æ„ï¼šéœ€è¦æ‰“å¼€sshç«¯å£ï¼Œå³22ç«¯å£</p>
<p data-type="NodeParagraph" data-n-id="20210925210248-1jfd02l">ğŸ”—å‚è€ƒï¼š</p>
<p data-type="NodeParagraph" data-n-id="20210925210248-bd62t0i"><a href="https://zhuanlan.zhihu.com/p/83095214">é€šè¿‡Gitå°†Hexoåšå®¢éƒ¨ç½²åˆ°æœåŠ¡å™¨</a></p>
</main><div class="oceanpress-backLink"></div>
</main>
